<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Syncify</title>
  <link rel="stylesheet" href="/static/default.css" type="text/css">
  <link rel="stylesheet" href="/static/new.css" type="text/css">
</head>
<body>
  <header>
    <a href="{{ url_for('root') }}">
      <div class="brand">
        <img src="/static/images/icon.png" alt="account icon" class="account-icon">
        <h1>Syncify</h1>
      </div>
    </a>

    <div class="account">
      <a href=" {{ userurl }}" target="_blank">
        <p class="username"> {{ username }}</p>
        <img src="{{ userimage }}" alt="account icon" class="account-icon">
      </a>
    </div>
  </header>
  <section>
    <div class="container">
      <form action="/session" onsubmit="return togglePasswordInput();">
        <label for="rname">Room name:</label>
        <input type="text" id="rname" required>
        
        <label for="quantity">Maximum number of members:</label>
        <input type="number" id="quantity" min="1" max="5" value="5">
        
        <div class="queue-settings">
          <input type="checkbox" id="modify_queue">
          <label for="modify_queue">Queue editable by everyone</label>
        </div>
        
        <label for="visibility">Public or private room</label>
        <select id="visibility" onchange="togglePasswordInput()">
          <option value="public" selected>Public</option>
          <option value="private">Private</option>
        </select>
        
        <label id="passwordLabel" style="display:none;">Password: <input type="password" id="passwordInput" name="password"></label>
  
        <script>
          function togglePasswordInput() {
            var visibilitySelect = document.getElementById("visibility");
            var passwordLabel = document.getElementById("passwordLabel");
            var passwordInput = document.getElementById("passwordInput");
  
            if (visibilitySelect.value === "private") {
              passwordLabel.style.display = "block";
              passwordInput.required = true;
              if (passwordInput.value === "") {
                return false; // Impedisce l'invio del modulo se la password è vuota
              }
            } else {
              passwordLabel.style.display = "none";
            }
            return true; // Consente l'invio del modulo se la validazione è superata
          }
        </script>
        <div class="button-container">
          <button type="submit">Create Room</button>
        </div>
      </form>
    </div>
  </section>  
  
  <footer>
    <p>copyright © 2023 redacted by Giulio & Deniel. The text contents of site are licensed under CC BY 4.0. </p>
  </footer>
</body>
</html>
